(this["webpackJsonp@livechat/chat-widget"]=this["webpackJsonp@livechat/chat-widget"]||[]).push([[4],{693:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0),o=n(31),a=n(24),c=n(9),l=n(1),s=n(89),u=n(2),d=n(5),b=n(399),f=n(92),m=n(133),p=(n(55),n(13)),g=n(197),h=n(7),v=n(12),O=n(398),j=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},x=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},y=function(e,t,n){var r=Object(u.Db)(t).sort((function(e,t){return e.timestamp-t.timestamp})),i=Object(u.q)((function(t){return t.node===e}),r);if(i>-1)return{currentTimestamp:r[i].timestamp,previousTimestamp:i>0?r[i-1].timestamp:n}},w=function(e,t){var n=i.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t={timestamp:e,direction:e>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=e,n.current.subscribers.forEach((function(e){return e(t)}))},o=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,o=e.intersectionHandler;if(x()){var c=i.useRef(null),l=i.useRef([]),s=Object(a.l)(o);return i.useEffect((function(){return c.current=new IntersectionObserver((function(e,t){s.current&&s.current(e,t)}),{root:t.current,rootMargin:n,threshold:r}),l.current.forEach((function(e){return c.current.observe(e)})),l.current=[],function(){return c.current.disconnect()}}),[n,r,t,s]),Object(a.c)((function(){return{add:function(e){c.current?c.current.observe(e):l.current.push(e)},remove:function(e){c.current?c.current.unobserve(e):l.current=l.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var i=y(r.target,t,n);return i&&i.previousTimestamp}var o=e.filter((function(e){return e.boundingClientRect.top<=e.rootBounds.top})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})).reverse()[0];if(o){var a=y(o.target,t,n);return a&&a.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);t&&r(t)},threshold:.2});return i.useEffect((function(){var e=Object(u.Db)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e({timestamp:t,direction:"up"})}))}),[]),Object(a.c)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,o&&o.add(e.node)},remove:function(e){o&&o.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter((function(t){return t!==e}))},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp},setToNewestTimestamp:function(){var e=Object.keys(n.current.dividers).map(Number).sort((function(e,t){return t-e}))[0];r(e)}}}))},k=i.createContext(null),A=function(){return i.useContext(k)},C=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,o=e.isOnBottomSource,a=w(n,null!=r?r:0);return i.useEffect((function(){a.setBeginingOfTime(null!=r?r:0)})),i.useEffect((function(){return o.subscribe((function(e){e&&a.setToNewestTimestamp()}))}),[o,a]),i.createElement(k.Provider,{value:a},t)};var E=Object(d.A)("span",{displayName:"DividerLabel",target:"eceo2x80"})({name:"1rpc86p",styles:"padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"});function S(){var e=Object(v.a)(["\n\t&-enter ",", &-exit "," {\n\t\tposition: relative;\n\t}\n\n\t&-enter "," {\n\t\ttop: ",";\n\t}\n\t&-enter-active "," {\n\t\ttop: 0;\n\t\ttransition: top ","ms ease-out;\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ease-out;\n\t}\n\n\t&-exit "," {\n\t\ttop: 0;\n\t\tposition: relative;\n\t}\n\t&-exit-active "," {\n\t\ttop: ",";\n\t\ttransition: top ","ms ease-out;\n\t}\n"]);return S=function(){return e},e}var T={name:"sx4ymz",styles:"opacity:0;pointer-events:none"},_=Object(d.A)(E,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(function(e){return!e.visible&&T}),";"),z=Object(d.A)("span",{target:"e1g4em790"})(""),R=200;var I=x()?function(e){var t=e.isUserScrollingSource,n=Object(h.a)(e,["isUserScrollingSource"]),c=Object(a.v)(t),s=A(),u=i.useState({direction:"up",timestamp:s.currentTimestamp()}),d=u[0],f=u[1];return i.useEffect((function(){s.subscribe(f);var e=s.currentTimestamp();return e!==d.timestamp&&f({direction:"up",timestamp:e}),function(){return s.unsubscribe(f)}}),[s]),d.timestamp?i.createElement(o.a,null,(function(e){var t=j(d.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return i.createElement(r.a,null,(function(e){var r=function(e,t){return e(S(),String(z),String(z),String(z),"up"===t?"-2em":"2em",String(z),R,R,String(z),String(z),"up"===t?"2em":"-2em",R)}(e.css,d.direction);return i.createElement(b.a,{component:null,childFactory:function(e){return i.cloneElement(e,{classNames:r})}},i.createElement(O.a,{key:t,classNames:r,timeout:R},i.createElement(_,Object(l.a)({},n,{visible:c}),i.createElement(z,null,t))))}))})):null}:function(){return null},P=function(e){var t=A();i.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}}),[])};var B=Object(d.A)("div",{target:"ehmqpie0"})({name:"1wai6wj",styles:"height:20px;margin:16px -0.5em;text-align:center;overflow:hidden"}),D=function(e){var t=e.timestamp,n=i.useRef(null);return P({timestamp:t,nodeRef:n}),i.createElement(o.a,null,(function(e){return i.createElement(B,{ref:n},i.createElement(E,null,j(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))}))},F=n(27);var H=Object(d.A)("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n1"})({name:"gbe43y",styles:"height:27px;margin:16px -0.5em;text-align:center;overflow:hidden"}),M=Object(d.A)(F.Z,{target:"eacid5n0"})({name:"1c0l2b2",styles:"display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"}),q=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,r=i.useRef(null),c=i.useState(!0),l=c[0],s=c[1];return Object(a.n)((function(){r.current&&n(r.current)})),i.useEffect((function(){var e=setTimeout((function(){return s(!1)}),625);return function(){return clearTimeout(e)}}),[]),i.createElement(o.a,null,(function(e){return i.createElement(H,{ref:r},i.createElement(M,{animated:l,minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},U=n(14),L=Object(d.A)("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:",(function(e){return e.theme.colors.textPrimary}),";line-height:1.2;color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.row?"row":"column"}),";"),V=n(88),N=n(173),W=n(21),K=n(26);var G=n(78),Y=n(282);var Q={},J=0,X=!1,Z=null,$=null;function ee(e){void 0===e&&(e={});var t=e.delay,n=void 0===t?1500:t,r=function(e){var t=Object(Y.a)(e.isOpen,e.defaultOpen||!1,e.onOpenChange),n=Object(G.a)(t,2),r=n[0],i=n[1];return{isOpen:r,open:function(){i(!0)},close:function(){i(!1)},toggle:function(){i(!r)}}}(e),o=r.isOpen,a=r.open,c=r.close,l=Object(i.useMemo)((function(){return""+ ++J}),[]),s=Object(i.useRef)(),u=function(){Q[l]=f},d=function(){for(var e in Q)e!==l&&(Q[e](!0),delete Q[e])},b=function(){clearTimeout(s.current),s.current=null,d(),u(),X=!0,a(),Z&&(clearTimeout(Z),Z=null),$&&(clearTimeout($),$=null)},f=function(e){e?(clearTimeout(s.current),s.current=null,c()):s.current||(s.current=setTimeout((function(){s.current=null,c()}),500)),Z&&(clearTimeout(Z),Z=null),X&&($&&clearTimeout($),$=setTimeout((function(){delete Q[l],$=null,X=!1}),500))};return Object(i.useEffect)((function(){return function(){clearTimeout(s.current),Q[l]&&delete Q[l]}}),[l]),{isOpen:o,open:function(e){!e&&n>0&&!s.current?(d(),u(),o||Z||X?o||b():Z=setTimeout((function(){Z=null,X=!0,b()}),n)):b()},close:f}}var te=n(672),ne=n(77),re=n.n(ne),ie=function(e,t){return t.getElementById(e)},oe=function(e){var t=e.portalId,n=void 0===t?te.a:t,r=e.children,o=Object(V.useFrame)().document,a=i.useState((function(){return ie(n,o)})),c=a[0],l=a[1];return i.useEffect((function(){var e=ie(n,o);e&&e!==c&&l(e)}),[c,n,o]),c?ne.createPortal(r,c):null};var ae=10,ce=Object(d.A)("div",{displayName:"Tooltip",target:"ezqijrk2"})("display:inline-block;background-color:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";color:",(function(e){var t=e.theme;return"hint"===e.kind?t.colors.grayscale[0]:t.colors.primaryTextColor}),";padding:1em;position:fixed;border-radius:",(function(e){return e.theme.borderRadius.lg}),";z-index:9;font-size:0.8em;font-weight:normal;margin-top:0.5em;margin-bottom:0.5em;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";transition:",(function(e){var t=e.theme;return"opacity 200ms "+t.transitions.easings.swift+", transform 300ms "+t.transitions.easings.swift}),";",(function(e){var t=e.position;return{left:t.left?t.left-ae+"px":"auto",right:t.right?t.right-ae+"px":"auto",top:t.top?t.top+"px":"auto",bottom:t.bottom?t.bottom:"auto",marginRight:t.right?0:"10px",marginLeft:t.left?0:"10px"}}),";"),le=Object(d.A)("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";margin-top:-1.5em;margin-bottom:-1.5em;",(function(e){var t=e.position,n=e.horizontalFactor,r=e.placement,i=void 0===r?"top":r,o=e.theme;return Object(l.a)({left:t.left?n-ae+("modern"===o.name?3:-1)+"px":"auto",right:t.right?n-ae+("modern"===o.name?3:-1)+"px":"auto"},"bottom"===i?{top:0}:{bottom:0,transform:"rotate(180deg)"})}),";"),se=Object(d.A)("div",{target:"ezqijrk0"})({name:"bjn8wh",styles:"position:relative"}),ue=function(e,t,n){var r=e.getBoundingClientRect(),i=r.left,o=r.right,a=r.bottom,c=r.top,s=n.window,u=s.innerWidth,d=s.innerHeight,b=s.pageXOffset,f=s.pageYOffset,m="top"===t?{bottom:d-(c+f)}:{top:a+f},p=i+b>u/2?{right:u-(o+b)}:{left:i+b};return Object(l.a)({},m,p)},de={position:{top:0,left:0},targetWidth:0};var be=function(e){var t=e.children,n=e.description,r=e.allowTouch,o=e.controlsRef,c=e.animated,s=void 0!==c&&c,d=e.placement,b=void 0===d?"bottom":d,f=e.trigger,m=void 0===f?"hover":f,p=e.onOpenChange,g=void 0===p?u.W:p,v=e.kind,O=void 0===v?"hint":v,j=Object(h.a)(e,["children","description","allowTouch","controlsRef","animated","placement","trigger","onOpenChange","kind"]),x=i.useRef(null);Object(W.k)();var y=i.useRef(null),w=i.useRef(!1),k=i.useState(de),A=k[0],C=k[1],E=i.useState(!1),S=E[0],T=E[1],_=Object(V.useFrame)(),z=ee(Object(l.a)({onOpenChange:function(e){s&&requestAnimationFrame((function(){return T(e)}));var t=function(){g(e,w.current),w.current=!1};e?(C({position:ue(y.current,b,_),targetWidth:y.current.offsetWidth}),requestAnimationFrame(t)):t()}},j));(null==o?void 0:o.current)&&(o.current={open:function(){w.current=!0,z.open(!0)},close:function(){w.current=!0,z.close(!0)}});var R,I=function(e,t,n){var r=e.isDisabled,o=e.trigger,a=Object(K.l)(),c=Object(i.useRef)(!1),s=Object(i.useRef)(!1),u=Object(K.k)().document,d=function(){(c.current||s.current)&&t.open(s.current)},b=function(e){c.current||s.current||t.close(e)};Object(i.useEffect)((function(){var e=function(e){n&&n.current&&"Escape"===e.key&&t.close(!0)};if(t.isOpen)return u.addEventListener("keydown",e,!0),function(){u.removeEventListener("keydown",e,!0)}}),[n,t]);var f=Object(W.i)({isDisabled:r,onHoverStart:function(){"focus"!==o&&("pointer"===Object(W.b)()?c.current=!0:c.current=!1,d())},onHoverEnd:function(){"focus"!==o&&(s.current=!1,c.current=!1,b())}}).hoverProps,m=Object(W.m)({onPressStart:function(){s.current=!1,c.current=!1,b(!0)}}).pressProps,p=Object(N.f)({isDisabled:r,onFocus:function(){Object(W.c)()&&(s.current=!0,d())},onBlur:function(){s.current=!1,c.current=!1,b(!0)}},n).focusableProps;return{triggerProps:Object(l.a)({"aria-describedby":t.isOpen?a:void 0},Object(K.h)(p,f,m)),tooltipProps:{id:a}}}(j,z,y),P=I.tooltipProps,B=I.triggerProps,D=function(e,t){var n=Object(K.c)(e,{labelable:!0}),r=Object(W.i)({onHoverStart:function(){return null==t?void 0:t.open(!0)},onHoverEnd:function(){return null==t?void 0:t.close()}}).hoverProps;return{tooltipProps:Object(K.h)(n,r,{role:"tooltip"})}}(P,z).tooltipProps,F=Object(W.m)({onPress:function(){z.open(!0)}}).pressProps;return Object(a.m)(x,(function(e){y.current.contains(e.target)||z.close(!0)}),_),j.isDisabled&&z.isOpen&&z.close(),i.createElement(N.b,Object(l.a)({},"press"===m?F:r?Object(K.h)(B,F):B,{ref:y}),t,z.isOpen&&i.createElement(oe,{portalId:te.b},i.createElement(ce,Object(l.a)({ref:x,position:A.position,kind:O},"hover"===m&&D,s&&{style:{opacity:(R=S)?1:0,transform:"translateY("+(R?0:8)+"px)"}}),i.createElement(se,null,i.createElement(le,{placement:b,kind:O,horizontalFactor:A.targetWidth/2,height:"10",position:A.position,width:"16"},i.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))};var fe=n(267),me=n(229),pe=n(39),ge=n(143);var he={name:"jubs0u",styles:"margin:0;background:transparent"},ve=function(e){return Object(r.c)("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;color:",e.colors.primaryTextColor,";background:",e.colors.surface,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.xl,";")},Oe=Object(d.A)("div",{target:"e1yhh5l71"})({name:"4hray5",styles:"display:flex;flex-direction:row-reverse"}),je=Object(d.A)("div",{target:"e1yhh5l70"})("padding:",(function(e){return 1*e.theme.spaceBase}),"px;padding-top:0;"),xe=i.forwardRef((function(e,t){var n=e.onClose,o=void 0===n?u.W:n,a=e.children,c=e["aria-label"],s=e["aria-labelledby"],d=e.isPreview,b=Object(h.a)(e,["onClose","children","aria-label","aria-labelledby","isPreview"]);Object(fe.d)({isDisabled:d});var f=Object(fe.c)({isOpen:!0,isDismissable:!0,onClose:o},t).overlayProps,m=Object(fe.b)().modalProps,p=function(e,t){var n=e.role,r=void 0===n?"dialog":n,o=Object(K.o)();o=e["aria-label"]?void 0:o;var a=Object(K.k)().document;return Object(i.useEffect)((function(){if(t.current&&!t.current.contains(a.activeElement)){Object(N.c)(t.current);var e=setTimeout((function(){a.activeElement===t.current&&(t.current.blur(),Object(N.c)(t.current))}),500);return function(){clearTimeout(e)}}}),[t]),{dialogProps:Object(l.a)({},Object(K.c)(e,{labelable:!0}),{role:r,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||o}),titleProps:{id:o}}}({"aria-label":c,"aria-labelledby":s},t).dialogProps;return Object(r.d)(N.a,{contain:!0,autoFocus:!0,restoreFocus:!0},Object(r.d)("div",Object(l.a)({},Object(K.h)(b,f,m,p),{ref:t,css:ve}),Object(r.d)(Oe,null,Object(r.d)(F.w,{css:he,onPress:o,"aria-label":"Close modal"},Object(r.d)(F.j,{"aria-hidden":!0}))),Object(r.d)(je,null,a)))})),ye=function(e){var t=e.onClose,n=void 0===t?u.W:t,o=e.shown,a=e.children,c=Object(h.a)(e,["onClose","shown","children"]),s=i.useRef(null),d=Object(pe.b)(),f=Object(ge.b)();return i.useEffect((function(){return f.setModalOpen(o)}),[o,f]),Object(r.d)(oe,null,Object(r.d)(me.a,{shown:o,onPress:n,exitDelay:25}),Object(r.d)(b.a,{component:null},o&&Object(r.d)(g.c,{nodeRef:s},Object(r.d)(xe,Object(l.a)({onClose:n,ref:s,isPreview:d},c),a))))},we=n(673),ke=n(676);var Ae=Object(d.A)("div",{target:"e1lbo1s41"})({name:"175oc9c",styles:"display:flex;justify-content:center;flex-shrink:0"}),Ce=Object(d.A)("div",{displayName:"IconLabel",target:"e1lbo1s40"})("display:flex;justify-content:center;align-items:center;",(function(e){var t=e.size,n=e.theme;return{width:t,height:t,borderRadius:n.borderRadius.round,backgroundColor:n.colors.surfaceDecorative}}),";"),Ee=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,o=Object(h.a)(e,["size","children"]);return i.createElement(Ae,null,i.createElement(Ce,Object(l.a)({size:n},o),r))};var Se="add_rate_comment_label",Te={name:"1azakc",styles:"text-align:center"},_e=Object(o.c)((function(e,t){var n=t.chatId,r=t.show,i=t.selectedRate,o=e.getApplicationState("isPreview"),a=o?function(){return Promise.resolve()}:function(t){var r=t.comment,i={};return void 0!==r&&(i.rateComment=r),e.requestUpdateChat(n,{properties:i})};return{selectedRate:i,show:r,mobile:e.getApplicationState("mobile"),rateChat:a,localize:e.localize,isPreview:o}}))((function(e){var t=e.rateChat,n=e.selectedRate,i=e.show,o=e.localize,a=e.isPreview,c=e.mobile,l=e.onClose,s=e.onSubmit;return Object(r.d)(ye,{shown:i,onClose:l},Object(r.d)(Ee,null,"good"===n?Object(r.d)(F.V,{label:o("rate_me_confirmation_good")}):Object(r.d)(F.U,{label:o("rate_me_confirmation_bad")})),Object(r.d)("p",{id:Se,css:Te},o("rate_me_add_comment")),Object(r.d)(we.a,{id:"rate_comment",mobile:c,onSubmit:function(e){t({comment:e.comment}),s()},submitLabel:o("button_add_feedback"),validate:function(e){return e.comment?{}:{comment:o("survey_fill_in_required_fields")}},disabled:a},Object(r.d)(d.q,null,Object(r.d)(ke.a,{label:"",serverName:"",type:"textarea",name:"comment",localize:function(){return o("rate_me_placeholder")},ariaLabelledBy:Se,required:!0}))))}));var ze={name:"870gjp",styles:"font-size:inherit"},Re={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},Ie=Object(d.A)(F.w,{target:"e1mt5al70"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}",(function(e){var t=e.theme;return t.isRtl&&"smooth"===t.name&&Re}),";"),Pe=Object(o.c)((function(e,t){var n=t.chatId,r=t.variant,i=t.source,o=t.onRatingCommentModalStateChange,a=e.getApplicationState("isPreview"),c=a?function(){return Promise.resolve()}:function(t){var r=t.rate,o={};return void 0!==r&&(o.rate=r),e.requestUpdateChat(n,{properties:o},{source:i})};return function(e){var t=e.getChat(n),i=t.active,l=t.properties,s=l.ended;return{chatRate:l.rate,disabled:!a&&(!s&&!i),rateChat:c,localize:e.localize,variant:r,chatId:n,onRatingCommentModalStateChange:o}}}))((function(e){var t=e.chatId,n=e.chatRate,o=e.disabled,a=e.rateChat,c=e.localize,l=e.variant,s=void 0===l?"normal":l,u=e.onRatingCommentModalStateChange,d=i.useState(!1),b=d[0],f=d[1],m=i.useState(n),p=m[0],g=m[1],h=i.useCallback((function(e){return function(){var t=p===e,r=t?null:e;a({rate:r}).catch((function(){return g(n)})),g(r),f(!t)}}),[p,n,a]);i.useEffect((function(){g(n)}),[n]),i.useEffect((function(){u&&u(b)}),[b,u]);var v=function(){f(!1)},O=function(e){return{disabled:o,active:n===e,onPress:h(e),"aria-label":c(n===e?"cancel_"+e+"_rating":"rate_"+e+"_and_open_modal")}},j=c("good"===n?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),x=c("bad"===n?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return Object(r.d)(i.Fragment,null,Object(r.d)(be,{isDisabled:o,description:j},Object(r.d)(Ie,O("good"),"small"===s?Object(r.d)(F.Q,{css:ze,"aria-hidden":!0}):Object(r.d)(F.V,{css:ze,"aria-hidden":!0}))),Object(r.d)(be,{isDisabled:o,description:x},Object(r.d)(Ie,O("bad"),"small"===s?Object(r.d)(F.P,{css:ze,"aria-hidden":!0}):Object(r.d)(F.U,{css:ze,"aria-hidden":!0}))),Object(r.d)(_e,{show:b,onClose:v,onSubmit:v,selectedRate:p,chatId:t}))})),Be=n(52);var De=function(e){return{small:"24px",large:"56px"}[e]},Fe=Object(d.A)("div",{target:"ekqutxs1"})({name:"v2yezz",styles:"display:flex;flex-grow:0;align-items:center;position:relative"}),He=Object(d.A)("div",{target:"ekqutxs0"})("position:absolute;",(function(e){var t=e.availability,n=e.size,r=e.theme;return{width:"small"===n?r.spaces.space4:r.spaces.space5,height:"small"===n?r.spaces.space4:r.spaces.space5,background:"online"===t?r.colors.success:r.colors.grayscale[500],border:"2px solid "+r.colors.surface,borderRadius:r.borderRadius.round,top:"large"===n&&"modern"!==r.name?"0":"-2px",left:"large"===n&&"modern"!==r.name?"0":"-2px"}}),";"),Me=function(e){var t=e.avatarUrl,n=e.availability,i=e.size,o=void 0===i?"normal":i,a=Object(h.a)(e,["avatarUrl","availability","size"]);return Object(r.d)(Fe,a,Object(r.d)(d.b,{imgUrl:t,size:De(o)}),n&&Object(r.d)(He,{availability:n,size:o}))};var qe=Object(d.A)("div",{target:"e9ks4qw3"})("display:flex;align-items:center;justify-content:center;padding-left:",(function(e){return e.logoWithoutShift?"0":"25px"}),";margin-bottom:",(function(e){return e.modernDowngrade?"0":"10px"}),";&>*{margin-left:",(function(e){return e.logoWithoutShift?"0":"-15px"}),";}"),Ue=Object(d.A)("div",{target:"e9ks4qw2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Le=Object(d.A)(Ee,{target:"e9ks4qw1"})("background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin-top:-25px;margin-left:",(function(e){return e.withoutShift?"0":"-25px"}),";position:absolute;z-index:2000;"),Ve=Object(d.A)("div",{target:"e9ks4qw0"})("width:56px;height:56px;border-radius:",(function(e){return e.theme.borderRadius.round}),";overflow:hidden;display:flex;align-items:center;position:relative;z-index:2;background-color:",(function(e){return e.theme.colors.surface}),";box-shadow:0 0 0 2px ",(function(e){return e.theme.colors.agentBarBackground}),";img{width:100%;height:100%;object-fit:contain;}&::after{top:0;left:0;right:0;bottom:0;content:'';position:absolute;width:100%;height:100%;border-radius:",(function(e){return e.theme.borderRadius.round}),";box-shadow:inset 0px 0px 0px 1px rgba(143, 143, 143, 0.15);}"),Ne=function(e){var t=e.avatarUrl,n=e.icon,o=e.logoUrl,a=e.showAvatar,c=void 0===a||a,l="modern"===Object(s.g)().name,u=i.useState(!l&&o),d=u[0],b=u[1];return Object(r.d)(qe,{modernDowngrade:l,logoWithoutShift:l||!o||!c},n&&Object(r.d)(Ue,{"aria-hidden":!0},Object(r.d)(Le,{size:"24px",isLight:!0,withoutShift:!o},n)),c&&Object(r.d)(Me,{size:"large",avatarUrl:t,availability:n?void 0:"online"}),d&&Object(r.d)(Ve,null,Object(r.d)("img",{alt:"Company logo",src:o,onError:function(){return b(!1)}})))};var We={name:"f7ay7b",styles:"justify-content:center"},Ke=Object(d.A)("div",{target:"e10kp68a3"})({name:"zov8s0",styles:"width:100%;display:flex;justify-content:center"}),Ge=Object(d.A)("div",{target:"e10kp68a2"})("display:flex;flex-direction:",(function(e){return e.verticalLayout?"row":"column"}),";justify-content:",(function(e){return e.verticalLayout?"flex-start":"center"}),";align-items:center;width:",(function(e){return e.verticalLayout?"100%":"auto"}),";max-width:100%;"),Ye={name:"xyzkeb",styles:"align-self:flex-start"},Qe=Object(d.A)(d.w,{target:"e10kp68a1"})({name:"172op4w",styles:"margin-top:0;margin-bottom:0"}),Je=Object(r.c)(We," min-width:auto;"),Xe=Object(d.A)("img",{target:"e10kp68a0"})({name:"1lnnphj",styles:"height:auto;max-height:50px"}),Ze=function(e){var t,n=e.agent,i=e.chatId,o=e.showAvatar,a=e.logoPath,c=e.isRatingEnabled,l="modern"===Object(s.g)().name;return Object(r.d)(Ke,null,Object(r.d)(Ge,{verticalLayout:l},Object(r.d)(Ne,{logoUrl:a,showAvatar:o,avatarUrl:o?n.avatar:void 0}),Object(r.d)("div",{css:(t=l,Object(r.c)("margin-top:0;margin-bottom:",t?"0":"10px",";text-align:",t?"left":"center",";width:",t?"100%":"auto",";max-width:100%;min-width:0;",t&&Ye,";"))},Object(r.d)(Qe,{as:"h1",ellipsis:!0},Object(r.d)(Be.a,null,n.name)),n.properties.jobTitle&&Object(r.d)(d.s,{ellipsis:!0},Object(r.d)(Be.a,null,n.properties.jobTitle)),c&&l&&Object(r.d)(d.q,null,Object(r.d)(Pe,{chatId:i,variant:"normal",source:"agent_bar"}))),c&&!l&&Object(r.d)(d.q,null,Object(r.d)(Pe,{chatId:i,variant:"normal",source:"agent_bar"})),!!a&&l&&Object(r.d)(d.f,{css:Je},Object(r.d)(Xe,{alt:"",src:a,draggable:!1}))))},$e=n(69),et=n(98),tt=n(202),nt="top-bar";var rt={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},it=Object(d.A)(F.w,{target:"eyohww45"})("width:24px;height:24px;opacity:1;background-color:",(function(e){var t=e.theme;return"modern"===t.name?"transparent":t.colors.lighterOppositeAgentBarColor}),";",(function(e){return e.theme.isRtl&&rt}),";"),ot=Object(d.A)(F.h,{target:"eyohww44"})((function(e){return"up"===e.direction&&{transform:"rotate(180deg)"}})," transition:transform 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";"),at=Object(d.A)(L,{target:"eyohww43"})("display:flex;text-align:left;overflow:hidden;height:auto;width:100%;align-items:",(function(e){return e.veritcallyCenter?"center":"flex-start"}),";transition:height 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";will-change:height;line-height:1.5;justify-content:center;"),ct=Object(d.A)("div",{target:"eyohww42"})({name:"1kjhtaf",styles:"display:flex;align-items:flex-start;margin-top:10px"}),lt=Object(d.A)("div",{target:"eyohww41"})({name:"zjik7",styles:"display:flex"}),st=Object(d.A)("div",{target:"eyohww40"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ut=function(e){var t=e.text,n=e.icon,a=e.isLoadingHistory,c=e.forceExpanded,u=e.forceCollapsed,d=e.isUploadDrawerVisible,b=e.logoPath,f=i.useState(!0),m=f[0],p=f[1],g=i.useState(!1),h=g[0],v=g[1],O=i.useState(!1),j=O[0],x=O[1],y=i.useState(null),w=y[0],k=y[1],A=i.useState(!1),C=A[0],E=A[1],S=i.useRef(null),T=Object(K.l)(),_=Object(s.g)().name,z="modern"===_?45:108,R=i.useCallback((function(e){var t=(void 0===e?{}:e).shouldKeepPrevious,n=void 0!==t&&t;if(m){var r=S.current.clientHeight;r!==w&&k(r),S.current.style.height=r+"px",S.current.scrollTop}S.current.style.height=(m?z:Number(w))+"px",n&&v(m),p((function(e){return!e}))}),[m,w,z]),I=function(){m&&(S.current.style.height="auto")},P=a&&m,B=u&&m,D=h&&!u&&!m&&!d;i.useEffect((function(){if(S&&!c){var e=S.current.clientHeight>z;x(e)}S&&c&&(S.current.style.height="auto",x(!1))}),[S,c,z]),i.useEffect((function(){j&&(k(S.current.clientHeight),S.current.style.height=z+"px",E(!0),p(!1))}),[j,z]),i.useEffect((function(){(P||B)&&R({shouldKeepPrevious:B})}),[R,P,B]),i.useEffect((function(){D&&(v(!1),R())}),[R,D]);var F=m||!j;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(at,{ref:S,row:!0,veritcallyCenter:!j,onTransitionEnd:I,textWrap:!0},Object(r.d)(st,{css:F?"":Object(tt.a)(2),id:T},"modern"!==_&&Object(r.d)(Ne,{logoUrl:b,icon:n}),Object(r.d)(lt,null,Object(r.d)("span",null,Object(r.d)($e.a,Object(l.a)({template:t,root:{component:Be.a},linkComponent:et.a},!m&&{limit:120}))),j&&Object(r.d)(ct,null,Object(r.d)(it,{onPress:R,"aria-expanded":m,"aria-controls":T,"aria-label":e(m?"show_less":"show_more")},Object(r.d)(ot,{size:24,direction:C&&m?"up":"down","aria-hidden":!0}))))))}))},dt=n(19),bt={modern:42,smooth:56},ft=Object(d.A)("div",{target:"e8t2lg23"})("width:",(function(e){return e.isVisible?100:0}),"%;height:",(function(e){return e.isVisible?100:0}),"%;position:absolute;top:0;left:0;z-index:101;"),mt=Object(d.A)("div",{target:"e8t2lg22"})("position:relative;top:",(function(e){return e.topOffset}),"px;left:0;width:100%;height:",(function(e){return"calc(100% - "+e.topOffset+"px)"}),";background-color:",(function(e){var t=e.theme;return Object(dt.h)(t.colors.surface,.93)}),";padding:",(function(e){return e.theme.spaces.space3}),";pointer-events:none;"),pt=Object(d.A)("div",{target:"e8t2lg21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:2px dashed ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),gt=Object(d.A)("h1",{target:"e8t2lg20"})((function(e){return e.theme.typography.subheading}),";"),ht=Object(o.c)((function(e){return{uploadFile:function(t){return Object(p.d)(e,t,"drag")},hideDropArea:function(){return e.setApplicationState({dropAreaVisible:!1})},isVisible:e.getApplicationState("dropAreaVisible")}}))((function(e){var t=e.isVisible,n=e.uploadFile,r=e.hideDropArea,a=e.topBarHeight,c=i.useState(!1),l=c[0],u=c[1],d=Object(s.g)(),f=bt[d.name]+a,m=function(e){e.preventDefault(),e.stopPropagation()};return i.createElement(oe,null,i.createElement(ft,{onDragLeave:function(){r()},onDragOver:m,onDrop:function(e){var t;m(e);var i=null==(t=e.dataTransfer)?void 0:t.files;i&&Array.prototype.forEach.call(i,n),r()},isVisible:t||l},i.createElement(b.a,{appear:!0,component:null},t&&i.createElement(g.e,{length:300,onEnter:function(){return u(!0)},onExited:function(){return u(!1)}},i.createElement(mt,{topOffset:f},i.createElement(pt,null,i.createElement(F.m,null),i.createElement(o.a,null,(function(e){return i.createElement(gt,null,e("drop_files_here"))}))))))))})),vt=n(6);function Ot(){var e=Object(v.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(-100%);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tleft: 0;\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(-100%);\n\t\ttransition: transform ","ms ",";\n\t}\n"]);return Ot=function(){return e},e}var jt=Object(d.A)(d.a,{target:"e10g0hdx4"})("position:relative;padding-top:",(function(e){return"modern"===e.theme.name?"0.6em":0}),";padding-bottom:",(function(e){var t=e.theme;return"modern"===t.name?"0.6em":t.spaces.space7}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),xt=Object(d.A)("div",{displayName:"TopBar",target:"e10g0hdx3"})("position:relative;height:auto;bottom:0;z-index:",(function(e){return e.elevate?102:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";@media (max-height: 330px){display:none;}"),yt=Object(d.A)("div",{target:"e10g0hdx2"})("min-height:",(function(e){return"calc("+("modern"===e.theme.name?45:108)+"px - 5px)"}),";"),wt={name:"1pc9iid",styles:"position:relative;box-shadow:none;padding:0"},kt=Object(d.A)(d.a,{target:"e10g0hdx1"})("position:absolute;top:0;left:0;width:100%;padding-top:",(function(e){return"modern"===e.theme.name?".6em":0}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(function(e){return e.collapsed&&wt}),";"),At=Object(d.A)("div",{target:"e10g0hdx0"})("position:relative;width:100%;z-index:",(function(e){var t=e.collapsed;return e.elevate?102:t?2:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";"),Ct="cubic-bezier(0.14, 0, 0, 1)",Et={enter:150,exit:150},St=function(e){return e(Ot(),150,Ct,150,Ct)},Tt={name:"kul0w8",styles:"transition:opacity 100ms ease-in-out;position:relative"},_t=Object(o.c)((function(e,t){var n=t.chatId;return function(e){var t,r=Object(c.rb)(e),i=Object(c.ub)(e),o=Object(c.vb)(e),a=Object(c.i)("logo",e),l=a.enabled,s=n===vt.d;return{agent:Object(c.d)(n,e),chatActive:e.getChat(n).active,showAvatar:Object(c.i)("agentAvatar",e).enabled,isRatingEnabled:Object(c.i)("rating",e).enabled,logoPath:l?(t=a.path,"https://"+Object(U.m)(t)):void 0,showAgentBar:r,showOfflineInformation:i,showQueueInformation:o,offlineInformation:s?Object(c.r)(e):"",queueText:s?Object(c.u)(e):"",showTopBar:Object(c.kb)(e),hasNoVisibleUserEvents:Object(c.J)(e),isDropAreaVisible:e.getApplicationState("dropAreaVisible"),isUploadingFiles:!!Object(c.s)(e).length}}}))((function(e){var t=e,n=t.agent,o=t.chatId,c=t.showAvatar,l=t.isRatingEnabled,s=t.chatActive,u=t.logoPath,f=t.showAgentBar,m=t.isAgentBarExpandedSource,p=t.showOfflineInformation,g=t.offlineInformation,h=t.showQueueInformation,v=t.queueText,j=t.isLoadingHistory,x=t.children,y=t.hasNoVisibleUserEvents,w=t.isDropAreaVisible,k=t.isUploadingFiles,A=t.wrapperRef,C=i.useRef(null),E=i.useRef(null),S=Object(a.v)(m);return Object(r.d)("div",{ref:A},Object(r.d)(ht,{topBarHeight:A.current?A.current.clientHeight:0}),Object(r.d)(xt,{id:nt,ref:C,elevate:w},Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{appear:!0,component:null,exit:S},f&&S&&Object(r.d)(O.a,{timeout:Et,classNames:St(t)},Object(r.d)("div",null,Object(r.d)(jt,{noShrink:!0},Object(r.d)(d.q,{flexFill:!0,ref:E,css:Tt},Object(r.d)(Ze,{agent:n,chatId:o,showAvatar:c,logoPath:u,isRatingEnabled:l&&s}))))))}))),Object(r.d)(At,{collapsed:!(h||p),elevate:w},(h||p)&&Object(r.d)(i.Fragment,null,Object(r.d)(yt,null)),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{appear:h||p,component:null},Object(r.d)(O.a,{timeout:Et,classNames:St(t)},Object(r.d)(kt,{collapsed:!(h||p)},h&&Object(r.d)(ut,{logoPath:u,text:v,icon:Object(r.d)(F.v,{size:24}),isLoadingHistory:j,forceExpanded:y,forceCollapsed:w,isUploadDrawerVisible:k}),p&&Object(r.d)(ut,{logoPath:u,text:g,icon:Object(r.d)(F.i,{size:16}),isLoadingHistory:j,forceExpanded:y,forceCollapsed:w,isUploadDrawerVisible:k}),x)))}))))})),zt=n(679),Rt=(n(222),n(94)),It=n(162),Pt=Object(d.A)("label",{target:"e1e9gyrb2"})("color:",(function(e){return e.theme.colors.textPrimaryColor}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";display:flex;align-items:center;"),Bt=Object(d.A)("span",{target:"e1e9gyrb1"})("display:flex;align-items:center;justify-content:center;&:focus{outline-style:",(function(e){return e.focusVisible?"auto":"none"}),";}"),Dt=Object(d.A)("span",{target:"e1e9gyrb0"})("display:inline-block;",(function(e){var t=e.theme;return Object(r.c)("margin-",t.isRtl?"right":"left",":5px;")}),";"),Ft=function(e){var t=e.disabled,n=e.icon,r=e.label,o=e.fileInputRef,c=Object(s.g)(),u=Object(a.k)((function(){return o.current.click()})),d=Object(W.f)(),b=function(e){return e||F.c}(n);return i.createElement(Pt,{flexFit:!0,htmlFor:"fileupload",disabled:t},i.createElement(Bt,Object(l.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},u,d),i.createElement(b,{color:t?c.colors.tertiaryTextColor:"currentColor","aria-hidden":!0}),r?i.createElement(Dt,null,r):null))},Ht=n(680),Mt=n(689),qt=n(20),Ut=n(33),Lt=function(e){var t=e.theme,n=e.disabled,i=e.active;return Object(r.c)("&:hover{background-color:",i?t.colors.pressedElement:t.colors.surfaceVariantHover,";",n&&"background-color: transparent",";}")};var Vt=Object(u.d)(["\ud83d\ude42","\ud83d\ude01","\ud83d\ude02","\ud83d\ude0a","\ud83d\ude0d","\ud83d\ude10","\ud83d\ude15","\ud83d\ude12","\ud83d\ude22","\ud83d\ude2d","\ud83c\udf89","\u2764\ufe0f","\ud83d\udc4c","\ud83d\udc4d","\ud83d\ude4f"],5),Nt=Object(d.A)("div",{target:"e1pkkif43"})({name:"14y8lnv",styles:"margin:0;padding:0;outline:none"}),Wt=Object(d.A)(F.w,{target:"e1pkkif42"})("display:flex;justify-content:center;align-items:center;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;",Lt,";"),Kt=Object(d.A)("div",{target:"e1pkkif41"})({name:"frpnj0",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-start"}),Gt=Object(d.A)("div",{target:"e1pkkif40"})({name:"1uuyw89",styles:"display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0"}),Yt=function(e){var t=e.onEmojiPicked,n=e.disabled,r=i.useRef(null),o=i.useRef(null),a=i.useRef({open:u.W,close:u.W}),c=i.useState(!1),l=c[0],s=c[1],d=function(e){t(e),a.current.close(),Math.random()<.1&&Object(Ut.d)("Emoji_inserted_from_picker",{emoji:e})},b=Object(Ht.a)({onSelect:d}),f=b.useHighlightedItemId();i.useEffect((function(){n&&l&&a.current.close()}),[n,l]);return 0===Vt.length||Object(qt.g)()?null:i.createElement(be,{animated:!0,placement:"top",trigger:"press",kind:"float",controlsRef:a,onOpenChange:function(e,t){var n;if(Object(W.c)()?b.setHighlightedItem(0):b.clearHighlightedItem(),e)null==(n=o.current)||n.focus(),Math.random()<.01&&Object(Ut.d)("emoji_picker_opened",{});else if(!t){var i;null==(i=r.current)||i.focus()}s(e)},description:i.createElement(Nt,{tabIndex:0,role:"grid","aria-label":"emoji picker",ref:o,"aria-activedescendant":f,onKeyDown:function(e){switch(e.key){case"ArrowUp":b.highlightedIndex.current-5>=0&&b.moveHighlightedItem(-5);break;case"ArrowDown":b.highlightedIndex.current+5<b.items.current.length&&b.moveHighlightedItem(5);break;case"ArrowLeft":b.highlightedIndex.current-1>=0&&b.moveHighlightedItem(-1);break;case"ArrowRight":b.highlightedIndex.current+1<b.items.current.length&&b.moveHighlightedItem(1);break;case"Home":b.setHighlightedItem(0);break;case"End":b.setHighlightedItem(b.items.current.length-1);break;case" ":case"Enter":e.preventDefault(),b.selectHighlightedItem();break;case"Tab":return void e.preventDefault();default:return void b.highlightItemByString(e)}e.preventDefault()}},Vt.map((function(e,t){return i.createElement(Kt,{key:t,role:"row"},e.map((function(e,t){return i.createElement(Gt,{key:t,role:"gridcell"},i.createElement(Mt.a,{emoji:e,itemList:b,onPress:function(){return d(e)}}))})))})))},i.createElement(Wt,{"aria-label":"open emoji picker",ref:r,active:l,onPress:function(){l&&a.current.close()},disabled:n},i.createElement(F.p,null)))},Qt=n(15),Jt=i.createContext({}),Xt=Object(d.A)("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:3.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}&>:last-child{border-bottom:0;}"),Zt=function(e){var t=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return null===r||r<0||0===n.current.length?null:n.current[r].ref}(e);return null!==t&&"true"!==t.current.getAttribute("aria-disabled")};var $t=function(e){var t=e.children,n=e.onClose,r=e.menuButtonRef,o=e.onSelect,c=Object(h.a)(e,["children","onClose","menuButtonRef","onSelect"]),s=Object(V.useFrame)(),u=i.useRef(null),d=i.useRef(!1),b=Object(Ht.a)({onSelect:o}),f=b.useHighlightedItemId();return Object(a.m)(u,(function(e){r.current.contains(e.target)||n()}),s),Object(a.n)((function(){u.current&&u.current.focus()})),i.createElement(oe,null,i.createElement(Jt.Provider,{value:b},i.createElement(Xt,Object(l.a)({onMouseOut:b.clearHighlightedItem,tabIndex:-1,role:"menu",ref:u,"aria-activedescendant":f,onMouseDown:function(){return d.current=!1},onKeyDown:function(e){switch(d.current=!0,e.preventDefault(),e.key){case"ArrowUp":return void b.moveHighlightedItem(-1);case"ArrowDown":return void b.moveHighlightedItem(1);case"Home":return void b.setHighlightedItem(0);case"End":return void b.setHighlightedItem(b.items.current.length-1);case" ":if(!Zt(b))return;return void b.selectHighlightedItem();case"Enter":if(!Zt(b))return;return b.selectHighlightedItem(),n(),void r.current.focus();case"Tab":return n(),e.shiftKey?void r.current.focus():void Object(Qt.e)(r.current).focus();case"Escape":return n(),void r.current.focus();default:return void b.highlightItemByString(e)}}},c),t)))},en=Object(d.A)("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:",(function(e){return e.theme.spaces.space4}),";padding-right:",(function(e){return e.theme.spaces6}),";width:100%;cursor:pointer;border-bottom:",(function(e){return"1px solid "+e.theme.colors.divider}),";color:",(function(e){var t=e.highlighted,n=e.theme;return t?n.colors.ctaText:n.colors.primaryTextColor}),";background-color:",(function(e){var t=e.highlighted,n=e.theme;return t&&n.colors.cta}),";&[aria-disabled='true']{pointer-events:none;color:",(function(e){return e.theme.colors.disabledContrast}),";background-color:",(function(e){return e.theme.colors.disabled}),";}"),tn=function(e){var t=e.disabled,n=e.text,r=e.value,o=Object(h.a)(e,["disabled","text","value"]),a=i.useRef(null),c=i.useContext(Jt),s=c.clearHighlightedItem,u=(0,c.useItem)({ref:a,text:n,value:r}),d=u.id,b=u.highlight,f=u.select,m=(0,u.useHighlighted)();return i.createElement(en,Object(l.a)({role:"menuitem",id:d,ref:a,highlighted:m,onMouseOver:b,onMouseOut:s,onClick:function(e){1!==e.nativeEvent.which||t||f()}},t&&{"aria-disabled":!0},o))},nn=n(18);var rn=function(e){return Object(r.c)("padding:0;color:",e.colors.tertiaryTextColor,";border-radius:",e.borderRadius.md,";transition:background-color 100ms ease-in-out;margin-left:",e.spaces.space1,";opacity:1;&:disabled{svg *{fill:",e.colors.tertiaryTextColor,";}}svg *{transition:fill 100ms ease-in-out;will-change:fill;}")},on=Object(d.A)("div",{target:"ex4ls1q3"})("position:absolute;top:0;height:100%;display:flex;align-items:flex-end;padding-bottom:",(function(e){return e.theme.spaces.space4}),";",(function(e){return e.position+": "+(e.dense?"0.75em":"10px")}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),an=Object(d.A)(d.q,{target:"ex4ls1q2"})({name:"bjn8wh",styles:"position:relative"}),cn={name:"1oaeivz",styles:"margin-right:8px"},ln={name:"1qkltea",styles:"margin-left:5px"},sn=Object(d.A)(F.w,{target:"ex4ls1q1"})("display:flex;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;svg{display:block;}",Lt,";"),un=Object(d.A)("input",{target:"ex4ls1q0"})({name:"eivff4",styles:"display:none"}),dn={name:"zefn70",styles:"bottom:4.8em;right:2em"};var bn=Object(o.c)((function(e,t){var n=t.chatId,r=function(t,n){p.d(e,t,n)},i=function(t){p.F(e,n,t)},o=function(t){p.I(e,n,t)},a=function(){p.K(e,Object(l.a)({source:"message_box"},c.B(e)))};return function(t){return{sendFile:r,sendMessage:i,setMessageDraft:o,openVideoCallMoment:a,messageDraft:t.getApplicationState("messageDraft"),initialMessageDraft:t.getApplicationState("initialMessageDraft"),reconnecting:c.xb(t),allowInput:c.ob(t),allowFileUpload:c.nb(t),isFileUploadPossible:c.R(t),mobile:t.getApplicationState("mobile"),applicationFocused:t.getApplicationState("applicationFocused"),videoCallButtonState:c.A(t),rtl:t.getApplicationState("rtl"),showAlternativeUploadOption:!t.getApplicationState("mobile")&&c.nb(t),showPermissionDeniedMessage:function(){return r=t.localize("screenshot_permission_error"),void p.a(e,n,{text:r});var r}}}}))((function(e){var t=e.allowFileUpload,n=e.isFileUploadPossible,c=e.mobile,s=e.onHeightChange,b=e.onSendMessage,f=e.allowInput,m=e.reconnecting,p=e.sendFile,g=e.sendMessage,v=e.setMessageDraft,O=(e.applicationFocused,e.onFocusChange),j=e.openVideoCallMoment,x=e.videoCallButtonState,y=e.rtl,w=e.showAlternativeUploadOption,k=e.messageDraft,A=e.initialMessageDraft,C=e.showPermissionDeniedMessage,E=Object(h.a)(e,["allowFileUpload","isFileUploadPossible","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","openVideoCallMoment","videoCallButtonState","rtl","showAlternativeUploadOption","messageDraft","initialMessageDraft","showPermissionDeniedMessage"]),S=i.useRef(null),T=i.useRef(null),_=i.useRef([0,0]),z=i.useRef(null),R=Object(a.h)("text-composer"),I=R.get(),P=i.useState(I||k||A||""),B=P[0],D=P[1],H=i.useState(!1),M=H[0],q=H[1],U=i.useState(!1),L=U[0],N=U[1],W=i.useMemo((function(){return v}),[v]),K=Object(a.d)(m),G=Object(pe.b)(),Y=y?"rtl":"ltr",Q=Object(V.useFrame)().document,J=i.useCallback((function(e,t){return e.forEach((function(e){return p(e,t)}))}),[p]),X=i.useCallback((function(e){switch(q(!1),e){case"screenshot":ne(),Object(Ut.d)("snapshot_selected",{});break;case"file":z.current.click()}}),[q,ne]),Z=i.useCallback((function(){N(!0),O&&O(!0)}),[O]),$=i.useCallback((function(){N(!1),O&&O(!1)}),[O]),ee=i.useCallback((function(e){D(""),g(e),v(null),R.clear(),b&&b()}),[g,b,v,R]),te=i.useCallback((function(e){J(Object(u.wb)(e.target.files))}),[J]),ne=i.useCallback((function(){Object(nn.a)().then((function(e){J([e],"screenshot")})).catch((function(e){"NotAllowedError"===e.name&&C(),Object(Ut.d)("snapshot_cancel",{reason:e.message})}))}),[J,C]);i.useEffect((function(){var e=S.current,t=function(){_.current=[e.selectionStart,e.selectionEnd]};return e.addEventListener("blur",t),function(){return e.removeEventListener("blur",t)}}),[]),i.useEffect((function(){var e=function(e){var t=Array.from(e.clipboardData.items);if(!t.some((function(e){return"text/plain"===e.type}))){var n=t.reduce((function(e,t){var n=t.getAsFile();return n&&e.push(n),e}),[]);n.length&&(e.preventDefault(),J(n,"clipboard"))}};return t&&L&&n&&Q.addEventListener("paste",e),function(){return Q.removeEventListener("paste",e)}}),[t,L,n,Q,p,J]);var ie=function(e){var t=_.current,n=t[0],r=t[1];re.a.flushSync((function(){D((function(t){var i=t.slice(0,n)+e+t.slice(r,t.length);return R.set(i),i}))})),re.a.flushSync((function(){S.current.focus();var t=n+e.length;S.current.setSelectionRange(t,t)}))},oe=G?{id:"chat-widget-text-input"}:{};return Object(r.d)(o.a,null,(function(e){return Object(r.d)(d.t,Object(l.a)({},E,{value:B,active:f,disabled:m&&!K,mobile:c,defaultValue:I,onSend:ee,onValueChange:function(e){D(e),R.set(e),W(e)}}),Object(r.d)(an,{verticalAlign:"center"},x.visible&&Object(r.d)(on,{position:"left",dense:x.visible},Object(r.d)(be,{placement:"top",description:"Start a video call"},Object(r.d)(F.w,{onPress:j,disabled:x.disabled,css:function(e){return{opacity:1,color:x.disabled?e.colors.tertiaryTextColor:e.colors.primaryTextColor}},"aria-label":"Start a video call"},Object(r.d)(F.bb,null)))),Object(r.d)(d.u,Object(l.a)({ref:S,autoFocus:Object(It.c)(),css:function(e){return function(e){var t=e.disabled,n=e.leftIcons,i=e.mobile,o=e.theme;return Object(r.c)("font-family:inherit;padding:14px ",o.isRtl&&!i&&"modern"!==o.name?"125px":"115px"," 14px ",n?"3.75em":"10px",";overflow-y:auto;margin:0;transition:box-shadow 0.1s ease-in-out;color:",t?o.colors.tertiaryTextColor:o.colors.primaryTextColor,";background-color:",t?o.colors.disabled:Object(dt.i)(.012,o.colors.surface),";border-radius:","modern"!==o.name?"12px":"0",";border:1px solid ",o.colors.borderSubtle,";box-shadow:",o.boxShadow.xl,";&:focus{background-color:",o.colors.surface,";border-color:",o.colors.cta,";}&:disabled{cursor:not-allowed;}")}({theme:e,mobile:c,disabled:m&&!K,leftIcons:x.visible})},disabled:m&&!K,flexFill:!0,minRows:1,onClick:function(){L||S.current.focus()},onBlur:$,onFocus:Z,onHeightChange:s,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder"),enterKeyHint:"send",dir:B?"auto":Y},oe)),Object(r.d)(on,{position:"right",dense:x.visible},Object(r.d)(Yt,{onEmojiPicked:ie,disabled:m&&!K}),t&&!w&&Object(r.d)(Ft,{disabled:!n,handleFileChange:te,fileInputRef:z}),w&&Object(r.d)(sn,{"aria-label":"Add an attachment",ref:T,onPress:function(){return q(!M)},disabled:!n,active:M},Object(r.d)(F.c,{"aria-hidden":"true"})),M&&Object(r.d)($t,{"aria-label":"File upload menu",menuButtonRef:T,onClose:function(){return q(!1)},css:dn,onSelect:X},Object(r.d)(tn,{value:"file",disabled:G},Object(r.d)(Ft,{disabled:!n,handleFileChange:te,label:e("send_file"),icon:F.r})),Object(r.d)(tn,{value:"screenshot",disabled:G},Object(r.d)(F.N,{css:function(e){return function(e){return e.isRtl?ln:cn}(e)},"aria-hidden":!0}),e("attach_screenshot"))),Object(r.d)(d.r,{flexFit:!0,icon:Object(r.d)(F.O,null),css:rn,"aria-label":"Send a message"}),!G&&Object(r.d)(un,{multiple:!0,onChange:te,type:"file",value:"",id:"fileupload",ref:z,disabled:!n}))))}))})),fn=n(145),mn=n(96),pn=n(84),gn=n(102),hn=n(41);var vn=Object(d.A)("span",{target:"e1oq7ugp9"})((function(e){var t=e.failed,n=e.theme;return{color:t?n.colors.error:n.colors.primaryTextColor}}),";"),On=Object(d.A)("div",{target:"e1oq7ugp8"})("flex:1;display:flex;flex-direction:column;margin:2px;min-width:calc(50% - 4px);max-width:100%;height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?140:100}),"px;"),jn=Object(d.A)("div",{target:"e1oq7ugp7"})("border-radius:",(function(e){return e.theme.borderRadius.xl}),";flex:1;width:100%;height:100%;display:flex;overflow:hidden;position:relative;align-items:center;justify-content:center;"),xn=Object(d.A)("div",{target:"e1oq7ugp6"})("color:",(function(e){return e.theme.colors.secondaryTextColor}),";background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";width:100%;height:100%;display:flex;align-items:center;justify-content:center;"),yn=Object(d.A)("img",{target:"e1oq7ugp5"})({name:"q4dzvk",styles:"width:100%;height:auto"}),wn=Object(d.A)("div",{target:"e1oq7ugp4"})({name:"1uja423",styles:"position:absolute;top:6px;right:6px;z-index:1"}),kn=Object(d.A)("div",{target:"e1oq7ugp3"})("height:24px;width:24px;display:flex;border-radius:50%;align-items:center;justify-content:center;",(function(e){var t=e.theme,n=e.success,r=e.error;return n?{backgroundColor:t.colors.success,color:t.colors.successContrast}:r?{backgroundColor:t.colors.error,color:t.colors.errorContrast}:void 0}),";"),An=Object(d.A)("div",{target:"e1oq7ugp2"})("opacity:",(function(e){return e.visible?1:0}),";transition:opacity 100ms ",(function(e){return e.theme.transitions.easings.smooth}),";position:absolute;left:6px;right:6px;bottom:6px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;z-index:1;",hn.A,"{width:20px;height:20px;}"),Cn=Object(d.A)("div",{target:"e1oq7ugp1"})("border-radius:",(function(e){return e.theme.borderRadius.md}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";padding:2px;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:rgba(0, 0, 0, 0.6);"),En=Object(d.A)("span",{target:"e1oq7ugp0"})((function(e){return e.theme.typography.caption}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";cursor:pointer;margin-right:4px;"),Sn={name:"e0dnmk",styles:"cursor:pointer"},Tn=function(e){var t=e.failReason,n=i.useRef(null),o=Object(N.f)({},n).focusableProps;return Object(r.d)(kn,Object(l.a)({"aria-label":t,error:!0},o,{ref:n,tabIndex:0}),Object(r.d)(hn.d,{css:Sn,size:24,"aria-hidden":!0}))},_n={name:"1nq59d9",styles:"transition:opacity 100ms linear"},zn=function(e){var t=e.name,n=e.failed,i=e.finished,a=e.url,c=e.fileType,l=e.mobile,s=e.alternativeText,u=e.onCancel,d=e.onAlternativeTextEdit,b=e.progress,f=void 0===b?0:b,m=e.failReason,p=void 0===m?"":m,g=e.insistHover,h=e.onHoverChange,v=Object(W.i)({onHoverChange:h}),O=v.hoverProps,j=v.isHovered,x=Object(W.f)().isFocusVisible;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(On,null,Object(r.d)(jn,O,Object(r.d)(wn,null,i&&Object(r.d)(kn,{success:!0},Object(r.d)(hn.db,{size:24,"aria-hidden":!0})),n&&Object(r.d)(be,{description:p,allowTouch:!0},Object(r.d)(Tn,{failReason:p})),!i&&!n&&Object(r.d)(gn.a,{size:"medium",progress:f,"aria-hidden":!0})),(u||d)&&Object(r.d)(An,{visible:g||j||x||l},u&&Object(r.d)(Cn,null,Object(r.d)(hn.A,{onPress:u,"aria-label":"remove the "+t+" file"},Object(r.d)(hn.T,{size:20,"aria-hidden":!0}))),"image"===c&&d&&Object(r.d)(Cn,null,Object(r.d)(hn.A,{onPress:d,"aria-label":"add alternative text to the "+t+" image"},Object(r.d)(hn.o,{size:20,"aria-hidden":!0})),Object(r.d)(En,{onClick:d},e("alt_text")))),"image"===c&&Object(r.d)(yn,{src:a,alt:s||"",style:{opacity:i?1:.25},css:_n}),"other"===c&&Object(r.d)(xn,null,Object(r.d)(hn.t,{size:56}))),Object(r.d)(vn,{ellipsis:!0,failed:n,finished:i},t))}))},Rn=n(201),In=n(670);var Pn=Object(d.A)("p",{target:"eprg9im5"})("margin-bottom:",(function(e){var t=e.theme,n=e.mobile;return"modern"!==t.name&&n?0:4}),"px;",(function(e){return e.theme.typography.caption})," ",Object(tt.a)(),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin:0;padding:0 12px;max-width:100%;max-height:50px;"),Bn=Object(d.A)("div",{target:"eprg9im4"})((function(e){var t=e.theme;return!e.mobile&&"modern"===t.name&&"max-height: 230px; overflow-y: auto;"}),";"),Dn=Object(d.A)("div",{target:"eprg9im3"})("height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?145:140}),"px;overflow:hidden;display:flex;align-items:center;justify-content:center;width:100%;"),Fn=Object(d.A)("div",{target:"eprg9im2"})("padding:",(function(e){var t=e.theme;return t.spaces.space3+" "+t.spaces.space5}),";display:flex;flex-direction:row;justify-content:center;align-items:center;max-width:100%;"),Hn=Object(d.A)(In.a,{target:"eprg9im1"})("height:34px;",(function(e){var t=e.theme.isRtl?"left":"right";return Object(r.c)("border-",t,":none;border-top-",t,"-radius:0;border-bottom-",t,"-radius:0;")}),";"),Mn=Object(d.A)(F.w,{target:"eprg9im0"})("color:",(function(e){var t=e.theme;return e.highlighted?t.colors.ctaText:t.colors.disabledContrast}),";background-color:",(function(e){var t=e.theme;return e.highlighted?t.colors.cta:t.colors.disabled}),";height:34px;width:34px;justify-content:center;align-items:center;display:flex;padding:6px 8px;",(function(e){var t=e.theme,n=t.isRtl?"left":"right",i=t.isRtl?"right":"left";return Object(r.c)("border-top-",i,"-radius:0;border-bottom-",i,"-radius:0;border-top-",n,"-radius:6px;")})," transition:background 100ms linear;"),qn={name:"q4dzvk",styles:"width:100%;height:auto"},Un=function(e){var t=e.url,n=e.alternativeText,a=e.onAlternativeTextChanged,c=e.mobile,l=e.titleId,s=i.useState(n||""),u=s[0],d=s[1],b=Object(W.f)().isFocusVisible,f=Object(K.l)();return Object(r.d)(o.a,null,(function(e){return Object(r.d)(Bn,{mobile:c},Object(r.d)(Dn,{mobile:c},Object(r.d)("img",{src:t,css:qn,alt:n})),Object(r.d)(Fn,null,Object(r.d)(Hn,{autoFocus:!0,"aria-labelledby":l,"aria-describedby":f,maxLength:16384,value:u,placeholder:e("describe_image"),onChange:function(e){var t=e.target;return d(t.value)}}),Object(r.d)(Mn,{"aria-label":"save the image's alternative text",highlighted:u!==n||b,disabled:u===n,onPress:function(){a(u)}},Object(r.d)(F.b,{size:24}))),Object(r.d)(Pn,{id:f,mobile:c},e("alternative_text_description")))}))},Ln=n(107);var Vn=Object(d.A)("h2",{target:"e1k6tlos7"})((function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})," padding:0 6px;font-size:14px;font-weight:normal;align-self:center;margin:0;"),Nn=Object(d.A)("div",{target:"e1k6tlos6"})({name:"189qznn",styles:"display:flex;cursor:pointer"}),Wn=Object(d.A)("div",{target:"e1k6tlos5"})("transition:max-height ",(function(e){return e.longAnimation?600:400}),"ms ",(function(e){return e.theme.transitions.easings.swift}),";overflow:hidden;max-height:249px;"),Kn=Object(d.A)("div",{target:"e1k6tlos4"})("height:auto;",(function(e){return e.edit&&{margin:"0 -8px"}}),";"),Gn=Object(d.A)("div",{target:"e1k6tlos3"})("max-height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?200:125}),"px;overflow:auto;display:flex;flex-direction:row;flex-wrap:wrap;padding:4px 0;"),Yn=Object(d.A)("hr",{target:"e1k6tlos2"})("margin:",8,"px -",8,"px 0;border:0;border-bottom:1px solid rgba(0, 0, 0, 0.1);"),Qn=Object(d.A)(hn.i,{target:"e1k6tlos1"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),Jn={name:"gc6sdx",styles:"padding-left:4px"},Xn=Object(d.A)(F.F,{target:"e1k6tlos0"})("padding:",(function(e){var t=e.theme,n=e.isEdit,r=e.expanded;return!e.mobile&&"modern"===t.name&&n&&r?"8px 8px 0":"8px"}),";",(function(e){return e.theme.typography.basic}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;"),Zn={name:"x4j9dr",styles:"margin-top:6px;max-width:100%"},$n={name:"13fmgtn",styles:"transform:scaleX(-1)"},er=Object(pn.createSelector)([u.D],(function(e){return e.map((function(e){return Object(l.a)({id:e.id},e.properties)}))})),tr=Object(o.c)((function(e,t){var n=t.chatId,r=function(t){e.emit("cancel_upload",{eventId:t})},i=function(t,r){e.updateEvent(n,t,{properties:{alternativeText:r}})},o=function(){e.emit("send_file_events")};return function(e){var t=e.getApplicationState(),n=t.isSendingFileEvents,a=t.mobile,l=t.config,s=t.license,u=t.group,d=t.requestedGroup,b=er(Object(c.s)(e));return{mobile:a,persistKey:Object(Ln.a)({license:s,group:u,requestedGroup:d}),isSendingFileEvents:n,uploadEntries:b,cancelUpload:r,setAlternativeText:i,sendFiles:o,localize:e.localize,themeName:l.theme.name}}}))((function(e){var t=e.uploadEntries,n=e.uploadEnabled,o=e.cancelUpload,a=e.localize,c=e.mobile,s=e.persistKey,d=e.sendFiles,b=e.isSendingFileEvents,f=e.setAlternativeText,p=e.themeName,g=e.scrollToBottom,h=Object(K.l)(),v=Object(K.l)(),O=i.useState(!0),j=O[0],x=O[1],y=i.useState(!1),w=y[0],k=y[1],A=i.useState(!1),C=A[0],E=A[1],S=i.useState(null),T=S[0],_=S[1],z=i.useState(""),R=z[0],I=z[1],P=i.useRef(null),B=i.useRef(null),D=function(e,t){var n=e.filter((function(e){return e.failed})),r=e.filter((function(e){return e.finished})).length,i=n.length,o=e.length,a=t("file_upload_status").replace("%finishedCount%",String(r)).replace("%totalCount%",String(o));switch(!0){case i>0:return{failedCount:i,uploadStatus:"error",title:i>1?t("files_failed_to_upload").replace("%files%",String(i)):n[0].failReason};case r===o:return{uploadStatus:"success",title:a};default:return{uploadStatus:"pending",title:a}}}(t,a),F="error"===D.uploadStatus&&t.length===D.failedCount,H=function(){R&&I("")},M=i.useCallback((function(){return c||"modern"!==p?249:228}),[p,c]),q=i.useCallback((function(e){return(t.length>2||e?M():201)+"px"}),[t,M]),U=i.useCallback((function(e){V(e)&&(P.current.style.maxHeight=e)}),[]),L=function(e){return B.current.style.height=e},V=function(e){return P.current.style.maxHeight!==e},N=i.useCallback((function(){j?(k(!0),U("0px")):x(!0)}),[j,U]),W=function(e){if(j){var t=q(!!e);!e&&V(t)?(_(null),E(!0),L(B.current.clientHeight+"px"),U(t)):(U(M()+"px"),_(e))}else _(e)},G=i.useCallback((function(){w?(x(!1),k(!1)):C&&(L("auto"),E(!1))}),[w,C]);return i.useEffect((function(){t.length&&j&&!w&&U(q(!!T))}),[t.length,j,w,U,q,T]),i.useEffect((function(){if(Object(mn.b)("session")){var e=function(){Object(u.G)(t)||function(e,t){var n=e.filter((function(e){return e.finished})).map((function(e){return Object(l.a)({},e,{url:e.serverUrl})}));Object(u.G)(n)||window.sessionStorage.setItem(t,JSON.stringify(n))}(t,s)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t,s]),Object(r.d)(Xn,{isEdit:T,expanded:!w&&j,mobile:c},Object(r.d)(m.b,{message:D.title,clearOnUnmount:!0,"aria-live":"error"===D.uploadStatus?"assertive":"polite"}),Object(r.d)(Nn,{onClick:function(e){e.stopPropagation(),N()}},T?Object(r.d)(hn.A,{"aria-label":"go back to upload list",onPress:function(){W(null)}},Object(r.d)(hn.b,{size:24,css:$n,"aria-hidden":!0})):Object(r.d)(i.Fragment,null,"pending"===D.uploadStatus?Object(r.d)(gn.a,{size:"medium","aria-hidden":!0}):"success"===D.uploadStatus?Object(r.d)(kn,{success:!0},Object(r.d)(hn.db,{size:24,"aria-label":"Upload success"})):Object(r.d)(kn,{error:!0},Object(r.d)(hn.d,{size:24,"aria-label":"Upload error"}))),Object(r.d)(Vn,Object(l.a)({id:v,flexFill:!0,ellipsis:!0},"error"===D.uploadStatus&&{failed:!0,title:D.title}),T?a("add_alternative_text"):D.title),Object(r.d)(hn.A,{css:Jn,"aria-label":"Toggle upload list","aria-controls":h,"aria-expanded":j,onPress:N,autoFocus:!0},Object(r.d)(hn.B,{size:24,"aria-hidden":!0},Object(r.d)(Qn,{direction:j&&!w?"down":"up",size:24})))),j&&!w&&Object(r.d)(Yn,null),Object(r.d)(Wn,{ref:P,onTransitionEnd:G,longAnimation:!j||w},j&&Object(r.d)(Kn,{id:h,edit:!!T,ref:B},T?Object(r.d)(Un,Object(l.a)({titleId:v},t.find((function(e){return e.id===T})),{onAlternativeTextChanged:function(e){W(null),f(T,e)},mobile:c})):Object(r.d)(i.Fragment,null,Object(r.d)(Gn,{mobile:c},t.map((function(e){return Object(r.d)(zn,Object(l.a)({},e,{key:e.id,mobile:c,failed:!!e.failed,insistHover:R===e.id,onHoverChange:H,onCancel:!b||e.failed?function(){return function(e){if(!c&&t.length>1){var n=Object(u.q)((function(t){return t.id===e}),t),r=n===t.length-1;I(t[n+(r?-1:1)].id)}o(e)}(e.id)}:null,onAlternativeTextEdit:b?null:function(){return W(e.id)}}))}))),Object(r.d)(Rn.a,{onClick:function(){d(),g({duration:0})},disabled:F||!n,pending:b||"pending"===D.uploadStatus,css:Zn},a("send_files"))))))}));var nr=Object(d.A)("div",{target:"ezpiwsd0"})({name:"1u57r43",styles:"position:absolute;bottom:0;left:0;right:0;z-index:100"}),rr=Object(o.c)((function(e,t){var n=t.markAsSeen,r=function(){c.x(vt.d,Date.now(),e).reverse().forEach((function(e){return n(e.id)}))};return function(e){var t=!Object(u.G)(c.s(e)),n=e.getApplicationState("mobile"),i=c.k(e,vt.d),o=e.getUnseenCount(vt.d),a=i&&i.properties?i.properties.text:null;return{isFileUploadAllowed:c.nb(e),isFileUploadPossible:c.R(e),isUploadingFiles:t,previewText:a,unseenCount:o,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isFileUploadAllowed,n=e.isFileUploadPossible,r=e.isUploadingFiles,o=e.previewText,c=e.unseenCount,l=e.chatId,s=e.mobile,u=e.scrollToBottom,d=e.markAllEventsAsSeen,f=e.isOnBottomSource,p=e.isScrollable,h=e.localize,v=o,O=Object(a.v)(f),j=c>0&&!O&&p,x=i.useState(j),y=x[0],w=x[1];return v||(v=h(c>1?"new_messages":"new_message")),!j&&y&&w(!1),i.useEffect((function(){if(j){var e=setTimeout((function(){return w(!0)}),300);return function(){return clearTimeout(e)}}}),[j]),i.createElement(nr,null,i.createElement(b.a,{appear:!0,component:null},t&&r&&i.createElement(g.b,{key:"upload"},i.createElement(tr,{scrollToBottom:u,chatId:l,uploadEnabled:n})),y&&i.createElement(g.b,{key:"unseen"},i.createElement(F.ab,{text:v,stickToEdge:s,unseenCount:c,onClick:u,onClose:d}))),y&&i.createElement(m.b,{message:v,clearOnUnmount:!0,"aria-live":"assertive"}))})),ir=function(e){var t=Object(s.g)().Maximized.css.background;return i.createElement(gn.a,Object(l.a)({},e,{adjustToColor:t,ariaLabel:"Loading previous messages"}))};var or=Object(d.A)("div",{target:"e1fh44if0"})({name:"1f0bicm",styles:"padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em"}),ar=function(e){return i.createElement(or,null,i.createElement(Rn.a,e))},cr=Object(o.c)((function(e){var t=function(){return p.O(e)},n=function(){return p.P(e,vt.d)};return function(e){var r="startChatAgain"===c.j(e,vt.d),i=e.getChat(vt.d).properties,o=i.starting,a=i.startChatAgainPending,l=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:l,isPending:o||a}}}))((function(e){var t=e.isPending,n=e.buttonLabel,r=e.startAction,o=e.onClick,a=void 0===o?u.W:o;return i.createElement(ar,{disabled:t,pending:t,onClick:function(e){r(),a(e)}},n)}));function lr(){var e=Object(v.a)(["\n\t\t&-enter,\n\t\t&-appear {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t}\n\t\t&-enter-active,\n\t\t&-appear-active,\n\t\t&-enter-done,\n\t\t&-appear-done {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t\t&-exit {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t}\n\t\t&-exit-active {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t"]);return lr=function(){return e},e}var sr=Object(d.A)("div",{target:"ekftid72"})((function(e){return e.theme.typography.caption}),";position:absolute;display:flex;flex-direction:row;height:40px;z-index:10;left:50%;top:14px;transform:translate(-50%, 0);max-width:100%;white-space:nowrap;background-color:",(function(e){return e.theme.colors.surface}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";border-radius:20px;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";"),ur=Object(d.A)("div",{target:"ekftid71"})("flex-grow:1;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;max-width:230px;padding:",(function(e){return e.theme.spaces.space5}),";"),dr=Object(d.A)("div",{target:"ekftid70"})("display:flex;flex-direction:row;justify-content:center;align-items:center;padding-right:",(function(e){return e.theme.spaces.space2}),";button{font-size:2em;border-radius:50%;width:32px;height:32px;margin-left:4px;background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),br=function(e){return e(lr())},fr=Object(o.c)((function(e,t){var n=t.chatId;return{shouldShow:Object(c.wb)(e),chatId:n}}))((function(e){var t=e.isAgentBarExpandedSource,n=e.chatId,c=e.shouldShow,l=Object(a.v)(t),s=Object(i.useState)(!1),u=s[0],d=s[1];return Object(r.d)(o.a,null,(function(e){return Object(r.d)(r.a,null,(function(t){var i=t.css;return Object(r.d)(O.a,{in:!l&&c||u,classNames:br(i),timeout:100,unmountOnExit:!0,mountOnEnter:!0},Object(r.d)(sr,null,Object(r.d)(ur,null,e("rate_agent")),Object(r.d)(dr,null,Object(r.d)(Pe,{chatId:n,variant:"small",onRatingCommentModalStateChange:d,source:"prompt"}))))}))}))})),mr=n(683),pr=n(119);var gr=Object(d.A)("div",{target:"ei7go8f1"})("position:absolute;bottom:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.cautionContrast}),";text-align:center;font-size:0.9em;line-height:2.8em;transform:translateY(100%);"),hr=Object(d.A)("div",{target:"ei7go8f0"})({name:"obt24",styles:"flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch"}),vr={name:"jddw9f",styles:"position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%, 50%)"},Or=function(e){return e.events[0].id},jr=function(e){return 0!==e.length?Or(e[0]):void 0},xr=function(e){var t=Object(u.N)(e);if(t){var n=Object(u.N)(t.events);if(n)return n.id}};var yr=Object(f.a)([function(e,t){return e.getTimeline(t)},u.D],(function(e,t){var n=c.L(t);return e.map((function(e,r){var i=0===r,o=e.showDate&&!i&&n;return Object(l.a)({},e,{isThreadBoundary:o,authorData:t.getUser(e.author)})}))}))((function(e,t){return t})),wr=Object(o.c)((function(e,t){var n=t.id,r=e.getApplicationState("isPreview")?u.W:function(){p.M(e)},i=e.localize,o=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},a=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(u.W)},l=function(t,r){p.F(e,n,t,r)},s=function(t){var r=t.eventId,i=t.buttonId,o=c.b(e);e.sendEvent(n,{type:"rich_message_postback",thread:o,properties:{eventId:r,postback:{id:i,toggled:!0}}},void 0)},d=function(t){return c.V(e,t)},b=function(t){return p.K(e,t)},f=function(t){return p.U(e,{properties:t})},m=function(t){var n=t.event,r=t.button;return p.s(e,n,r)};return function(e){var t,u=e.getChat(n),p=u.active,g=u.properties,h=g.agentIsTyping,v=g.loadingHistory,O=g.queued,j=c.d(n,e),x=c.D(e,n),y=e.getUnseenCount(n),w=c.L(e)&&c.eb(e),k=c.i("rating",e).enabled,A=!0===(null==(t=e.getView("Moment"))?void 0:t.show);return{agent:j,active:p,loadHistory:o,isThreadStickerEnabled:w,hasMoreHistory:x,markAsSeen:a,sendMessage:l,queued:O,sendPostback:s,showPrechat:r,localize:i,updateSessionUser:f,showMoment:b,isMomentVisible:A,unseenCount:y,isRatingEnabled:k,timeline:yr(e,n,e.getState()),activeQuickReply:c.v(n,e),agentIsTyping:h&&!!j,shouldLoadHistory:x&&!v,isLoadingHistory:v,showAvatar:c.i("agentAvatar",e).enabled,pageFocused:e.getApplicationState("pageFocused"),inputMode:c.j(e,n),reconnecting:c.xb(e),displayOfflineInformation:c.ub(e),lastSeenEvent:y>0&&e.getLastSeenAgentEvent(n),isGreeting:d,handleRichGreetingButtonClicked:m}}}))((function(e){var t=e,n=t.displayOfflineInformation,o=t.activeQuickReply,c=t.agent,f=t.isThreadStickerEnabled,p=t.hasMoreHistory,h=t.pageFocused,v=t.id,O=t.inputMode,j=t.loadHistory,x=t.localize,y=t.queued,w=t.reconnecting,k=t.shouldLoadHistory,A=t.showAvatar,E=t.showPrechat,S=t.timeline,T=t.agentIsTyping,_=t.mobile,z=t.unseenCount,R=t.isRatingEnabled,P=t.lastSeenEvent,B=t.sendMessage,F=t.isMomentVisible,H=t.handleRichGreetingButtonClicked,M=t.isOnBottomSource,U=t.isAgentBarExpandedSource,L=t.isLoadingHistory,V=i.useRef(null),N=i.useRef(null),W=Object(a.w)(!1),K=i.useRef(!1),G=i.useState(z),Y=G[0],Q=G[1],J=i.useState("hidden"),X=J[0],Z=J[1],$=i.useState(h),ee=$[0],te=$[1],ne=i.useState(P)[0],re=Object(a.c)((function(){return function(e,t){return e.some((function(e){return e.type===vt.h}))?"draft":t?"newMessageDivider":"form"}(S,Y)})),ie=Object(a.d)(w),oe="modern"!==Object(s.g)().name&&A,ae="modern"===Object(s.g)().name;i.useEffect((function(){h&&!F||!ee?!h||F||ee||te(!0):te(!1)}),[h,ee,F]);var ce=i.useCallback((function(e){e&&k&&j()}),[k,j]),le=i.useCallback((function(e){M.next(e),te(!0)}),[M]),se=i.useCallback((function(e){e.deltaY>5&&U.next(!1)}),[U]),ue=Object(a.t)(V,{firstItemKey:jr(S),lastItemKey:xr(S),onIsScrolledToTopChanged:ce,onIsScrolledToBottomChanged:le,onIsUserScrollingChanged:W.next,onScrollDeltaChanged:se}),de=ue.scrollToTop,be=ue.scrollToBottom,fe=ue.getIsOnBottom,me=ue.onWheel,pe=ue.onTouchStart,ge=ue.getIsScrollable,he=ue.setScrollTargetNode,ve=i.useCallback((function(e){fe()&&be(e)}),[fe,be]),Oe=i.useCallback((function(){ve({duration:0})}),[ve]),je=function(e){return void 0===e&&(e=u.W),function(){be({duration:0}),e()}},xe=Object(a.q)((function(){fe()?be():be({duration:0}),U.next(!1),Q(0)})),ye=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e})),i.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,i=e.browserEvent,o=t.current,a=o.active,c=o.showMoment,l=o.sendPostback,s=o.sendMessage,u=o.handleSendMessage,d=o.isGreeting,b=o.handleRichGreetingButtonClicked;if(d(r))return b({event:r,button:n}),void("message"===n.type&&u());if(a)switch(n.type){case"webview":return l({eventId:r,buttonId:n.postbackId}),void c({url:n.value,source:"rich_message",triggeredTarget:Object(nn.d)(i)});case"message":return s(n.text,{type:"action_button",event:r,button:n}),void u();case"copy":return void Object(pr.a)(n.value);default:return void l({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])}(Object(l.a)({},e,{handleSendMessage:xe})),we=i.useCallback((function(e){K.current=e}),[]),ke=!!(T||y||o||n),Ae=i.useCallback((function(e){var t;U.get()&&N.current&&(N.current.contains(e.target)||e.target===window.document||(null==(t=e.target)?void 0:t.closest('button, label, input, [role="menuitem"], textarea'))||V.current&&V.current.contains(e.target)&&U.next(!1))}),[U]);return i.useEffect((function(){var e=U.subscribe((function(e){e&&requestAnimationFrame((function(){ve({duration:0})}))}));return function(){return e()}}),[U,ve]),i.useEffect((function(){ke&&ve()}),[ke,ve]),i.useEffect((function(){if(_){var e=function(){K.current&&be({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[_,be]),i.useEffect((function(){return Z("auto")}),[]),Object(a.s)({mainElementRef:V,itemsCount:S.reduce((function(e,t){return e+t.events.length}),0),tableEdgeReached:function(e){"previous"===e&&de({duration:0})}}),Object(r.d)(C,{isOnBottomSource:M,beginingOfTime:S.length>0?S[0].timestamp:null,rootRef:V},Object(r.d)(d.f,{noShrink:!0},Object(r.d)(_t,{chatId:v,isAgentBarExpandedSource:U,isLoadingHistory:L,wrapperRef:N},f&&Object(r.d)(I,{css:vr,isUserScrollingSource:W}),w&&!ie&&Object(r.d)(i.Fragment,null,Object(r.d)(m.b,{message:x("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),Object(r.d)(gr,null,x("reconnecting")+"\u2026")))),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(g.e,null,Object(r.d)(hr,{onClick:Ae},Object(r.d)(rr,{chatId:v,isScrollable:ge(),isOnBottomSource:M,scrollToBottom:be,markAsSeen:ye.markAsSeen}),R&&Object(r.d)(fr,{isAgentBarExpandedSource:U,chatId:v}),Object(r.d)(d.k,{active:ee,css:function(e){return function(e){var t=e.theme,n=e.overflow;return Object(r.c)("background:transparent;overscroll-behavior:contain;overflow-y:",t.isRtl?n:"auto",";position:absolute;top:0;bottom:0;left:0;right:0;")}({theme:e,overflow:X})},onWheel:me,onTouchStart:pe,ref:V},p&&Object(r.d)(d.q,null,Object(r.d)(ir,{size:"medium",style:{margin:"auto"}})),S.map((function(e){return Object(r.d)(i.Fragment,{key:Or(e)},e.isThreadBoundary&&Object(r.d)(D,{timestamp:e.timestamp}),ne&&Y>0&&e.events.some((function(e){return e.id===ne.id}))&&Object(r.d)(q,{unseenCount:Y,setScrollTargetNode:he}),Object(r.d)(mr.a,null,Object(r.d)(d.j,Object(l.a)({isOwn:e.own,isCarousel:"carousel"===e.type,onlyFirstWithMeta:!0},oe&&e.authorData.avatar&&{avatar:e.authorData.avatar}),e.events.map((function(t,n){return Object(r.d)(zt.a,Object(l.a)({chatId:v,id:t.id,key:t.id,showMetaOnClick:!ae||0!==n,radiusType:e.radiusType,listItemHandlers:ye,scrollTarget:re,scrollToBottom:be,increasedAvatarPadding:"carousel"===t.type&&oe},!Y&&{setScrollTargetNode:he}))})))))})),o&&Object(r.d)("div",{role:"row"},Object(r.d)("div",{role:"gridcell"},Object(r.d)(Rt.b,{"aria-labelledby":o.id,onSelect:function(e){var t=o.properties.quickReplies[e];o.properties.invitation?H({event:o.id,button:t}):B(t.text,{type:"quick_reply",event:o.id,button:t}),xe()},replies:o.properties.quickReplies}))),T&&Object(r.d)(i.Fragment,null,Object(r.d)(m.b,{clearOnUnmount:!0,"aria-live":"polite",message:x("operator_is_typing",{operator:c.name}).replace("...","")}),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(g.b,{exit:!1},Object(r.d)(fn.b,{avatar:oe?c.avatar:null})))))))),"requestPrechat"===O?Object(r.d)(ar,{onClick:je(E)},x("embedded_greeting_accept")):"startChat"===O||"startChatAgain"===O?Object(r.d)(cr,{onClick:je()}):"text"===O?Object(r.d)(bn,{chatId:v,onSendMessage:xe,onHeightChange:Oe,onFocusChange:we}):null)}));function kr(){var e=Object(v.a)(["\n\t&-enter,\n\t&-appear {\n\t\topacity: 0;\n\t}\n\n\t&-enter&-enter-active,\n\t&-appear&-appear-active {\n\t\topacity: 1;\n\t\ttransition: opacity ","ms ",";\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ",";\n\t}\n"]);return kr=function(){return e},e}var Ar=Object(d.A)("div",{displayName:"View",section:!0,target:"e1u2umur1"})({name:"73jfg1",styles:"flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em"}),Cr=Object(d.A)("div",{displayType:"ViewContent",target:"e1u2umur0"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),Er=function(e,t){return e(kr(),200,t.transitions.easings.sharp,200,t.transitions.easings.sharp)},Sr={name:"1d3w5wq",styles:"width:100%"},Tr=function(e){var t=e.children,n=e.full,i=void 0!==n&&n;return Object(r.d)(Ar,null,Object(r.d)(r.a,null,(function(e){var n=e.css,o=e.theme;return Object(r.d)(b.a,{css:Sr},Object(r.d)(O.a,{appear:!0,classNames:Er(n,o),timeout:200},Object(r.d)(Cr,{full:i},t)))})))},_r=Object(d.A)(d.c,{target:"ea4v29u0"})("background-color:",(function(e){return e.theme.colors.surface}),";"),zr=function(){return i.createElement(o.a,null,(function(e){return i.createElement(Tr,null,i.createElement(_r,null,i.createElement(d.m,null,e("lost_connection"))))}))};function Rr(){var e=Object(v.a)(["\n\t50% {\n\t\topacity: 0.0;\n\t}\n"]);return Rr=function(){return e},e}var Ir=Object(r.e)(Rr()),Pr=Object(r.c)("background:currentColor;opacity:0.3;animation:",Ir," 1.5s linear 0s infinite;"),Br=Object(r.c)(Pr,";"),Dr=Object(d.A)("div",{target:"e1uut4cd4"})("width:",(function(e){return e.width||"10em"}),";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",Pr,";"),Fr=Object(d.A)("div",{target:"e1uut4cd3"})({name:"1d3w5wq",styles:"width:100%"}),Hr=Object(d.A)("div",{target:"e1uut4cd2"})({name:"66u5jz",styles:"padding:1em"}),Mr=Object(d.A)("div",{target:"e1uut4cd1"})({name:"10qv9sv",styles:"width:100%;margin-top:0.5em"}),qr=Object(d.A)("div",{displayName:"Message",section:!0,target:"e1uut4cd0"})(""),Ur=function(){return Object(r.d)(Tr,{full:!0},Object(r.d)(Fr,null,Object(r.d)(d.a,null,Object(r.d)(d.b,{css:Br,letter:" "})),Object(r.d)(Hr,null,Object(r.d)(Mr,null,Object(r.d)(d.q,null,Object(r.d)(qr,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Dr,null),Object(r.d)(Dr,{width:"7em"})))))),Object(r.d)(Mr,null,Object(r.d)(d.q,{reverse:!0},Object(r.d)(qr,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Dr,null)))))),Object(r.d)(Mr,null,Object(r.d)(d.q,null,Object(r.d)(qr,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Dr,null)))))))))},Lr=n(661);var Vr=Object(d.A)("div",{target:"e5cxvfk0"})({name:"iwp08z",styles:"display:flex;justify-content:center;font-size:0.9em"});var Nr="close_chat_confirm_label",Wr=Object(d.A)("p",{target:"ev8wfi81"})({name:"1azakc",styles:"text-align:center"}),Kr=Object(d.A)(F.w,{target:"ev8wfi80"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Gr=function(e){var t=e.localize,n=e.closeChat,r=e.onModalStateChange,o=i.useState(!1),a=o[0],c=o[1],l=i.useState(!1),s=l[0],u=l[1],d=Object(pe.b)(),b=function(){c(!1),r({isOpen:!1})};return i.createElement(i.Fragment,null,i.createElement(be,{description:t("close_chat")},i.createElement(Kr,{onPress:function(){c(!0),r({isOpen:!0})},"aria-label":t("close_chat")},i.createElement(F.j,{"aria-hidden":!0}))),i.createElement(ye,{shown:a,onClose:b,"aria-labelledby":Nr},i.createElement(Ee,{"aria-hidden":!0},i.createElement(F.q,null)),i.createElement(Wr,{id:Nr},t("leave_chat_confirm")),i.createElement(Vr,null,i.createElement(Lr.i,{destructive:!0,label:t("close_chat"),submitting:s,onClick:function(){d?b():(u(!0),n().then((function(){u(!1),b()})).catch((function(){u(!1)})))}}))))},Yr=n(662),Qr=n(678),Jr=n(669);var Xr="email-transcript-sent-label",Zr="email-transcript-not-sent-label",$r=Object(d.A)("h2",{target:"emwx8nd0"})({name:"xvo3ou",styles:"text-align:center;font-size:16px;font-weight:normal"}),ei=function(e){var t=e.email,n=e.localize,r=e.sent,o=e.open,c=e.onClose,l=e.onSubmit,s=e.mobile,b=Object(a.h)("email-transcript"),f=i.useState((function(){return{email:t}})),m=f[0],p=f[1];return i.useEffect((function(){if(o){var e=b.get();p(e||{email:t})}}),[b,t,o]),i.createElement(ye,{shown:o,onClose:c,"aria-labelledby":r?Xr:Zr},o&&(r?i.createElement(i.Fragment,null,i.createElement(Ee,{"aria-hidden":!0},i.createElement(F.B,null)),i.createElement($r,{id:Xr,textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),i.createElement(Vr,null,i.createElement(Rn.a,{capitalize:!0,onClick:c},n("hide")))):i.createElement(i.Fragment,null,i.createElement(Ee,{"aria-hidden":!0},i.createElement(F.B,null)),i.createElement($r,{id:Zr},n("send_transcript_to_email")),i.createElement(we.a,{id:"email_transcript",initialValues:m,mobile:s,onSubmit:function(e){return Math.random()<.01&&Object(Ut.d)("chat_transcript_ordered",{}),l(e.email).then((function(){return b.destroy()})).catch((function(){var e;return(e={})[Jr.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},i.createElement(d.q,null,i.createElement(Yr.c,{onChange:function(e){var t=e.values;e.dirty&&b.set(t)}}),i.createElement(Qr.a,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:u.D}))))))},ti=n(223),ni=Object(d.A)("div",{target:"eleibs71"})("display:flex;position:relative;width:44px;height:24px;border-radius:24px;background-color:",(function(e){return e.theme.colors.inactiveElement}),";will-change:background-color;transition:background-color 0.2s linear;cursor:pointer;outline-offset:2px;&::after{content:'';position:absolute;height:16px;width:16px;border-radius:16px;top:4px;left:4px;background-color:",(function(e){return e.theme.colors.surface}),";will-change:left;transition:left 0.2s ease-in;}"),ri=Object(d.A)("input",{target:"eleibs70"})("position:absolute;left:2137px;&:checked+div{background-color:",(function(e){return e.theme.colors.success}),";&::after{left:24px;}}"),ii=function(e){var t=e.checked,n=Object(h.a)(e,["checked"]);return i.createElement(i.Fragment,null,i.createElement(ri,Object(l.a)({type:"checkbox",checked:t},n)),i.createElement(ni,null))};function oi(){var e=Object(v.a)(["\n\t&-enter {\n\t\topacity: ",";\n\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 20%, 0);\n\t\t}\n\t}\n\n\t&-enter-active {\n\t\topacity: 1;\n\t\ttransition: opacity 100ms ease-in-out;\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 0%, 0);\n\t\t\ttransition: transform 200ms;\n\t\t}\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity 100ms ease-in-out;\n\t}\n"]);return oi=function(){return e},e}var ai=function(e){return Object(r.c)("margin-"+(e.isRtl?"left":"right")+": 8px;","")},ci=Object(d.A)("div",{target:"e1s5h2c81"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),li=Object(d.A)(tn,{target:"e1s5h2c80"})({name:"2o6p8u",styles:"justify-content:space-between"}),si=function(e){return e(oi(),"0.00001")},ui=Object(o.c)((function(e){var t=vt.d,n=function(n){return e.requestUpdateChat(t,{properties:{transcriptSentTo:n}})},r=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var i=e.getChat(t),o=i.active,a=i.properties,l=a.transcriptSentTo,s=Object(ti.a)(e,"floating-menu");return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:n,transcriptSentTo:l,enableTranscript:!e.getApplicationState("isPreview")&&(o||a.ended),showTranscript:Object(c.i)("emailTranscript",e).enabled,toggleSounds:r,chatTransfer:s,customerEmail:e.getSessionUser().email,showVoiceAssistant:function(){return Object(p.K)(e,{url:vt.o})}}}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,o=e.localize,c=e.muted,l=e.sendTranscript,u=e.showTranscript,d=e.toggleSounds,f=e.chatTransfer,m=e.transcriptSentTo,p=e.showVoiceAssistant,g=i.useState(!1),h=g[0],v=g[1],j=i.useState(!1),x=j[0],y=j[1],w=Object(V.useFrame)(),k=Object(s.g)(),A=Object(ge.b)();Object(a.g)(w);var C=i.useRef(null),E=!!m,S=i.useCallback((function(e){switch(e){case"sounds":return void d();case"transcript":return v(!1),void y(!0);case"identityTransfer":return Object(Ut.d)("chat_app_button_clicked",{ui_source:"menu"}),v(!1),void f.showMoment();case"voiceAssistant":v(!1),p()}}),[d,f,p]);return Object(a.p)((function(){h&&Math.random()<.01&&Object(Ut.d)("meatballs_menu_opened",{})}),[h]),i.useEffect((function(){return A.setMenuOpen(h)}),[h,A]),Object(r.d)(i.Fragment,null,Object(r.d)(be,{isDisabled:h,description:o("theme_options")},Object(r.d)(F.w,{css:Object(r.c)("padding:0;height:32px;background-color:",h?k.colors.lighterOppositeTitleBarColor:"transparent",";&:hover{background-color:",k.colors.lighterOppositeTitleBarColor,";}"),ref:C,onPress:function(){return v((function(e){return!e}))},active:h,"aria-label":h?"Close menu":"Open menu","aria-expanded":h,"aria-haspopup":!0},Object(r.d)(F.l,{"aria-hidden":!0,color:"modern"===k.name?k.colors.titleBarText:k.colors.agentBarText}))),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{component:null},h&&Object(r.d)(O.a,{classNames:si(t),timeout:200},Object(r.d)($t,{menuButtonRef:C,onClose:function(){return v(!1)},onSelect:S},u&&Object(r.d)(tn,{disabled:!n,text:o("send_transcript"),value:"transcript"},Object(r.d)(F.B,{css:ai(k),"aria-hidden":!0}),o("send_transcript")),f.available&&Object(r.d)(tn,{text:vt.j,value:"identityTransfer",disabled:f.disabled},Object(r.d)(F.D,{css:ai(k),"aria-hidden":!0}),vt.j),Object(r.d)(li,{text:o(c?"unmute":"mute"),"aria-label":c?o("sounds")+" "+o("unmute"):o("sounds")+" "+o("mute"),value:"sounds"},Object(r.d)(ci,null,c?Object(r.d)(F.E,{css:ai(k),"aria-hidden":!0}):Object(r.d)(F.Y,{css:ai(k),"aria-hidden":!0}),Object(r.d)("span",{"aria-hidden":!0},o("sounds"))),Object(r.d)(ii,{checked:!c,onChange:function(){return!c},"aria-hidden":!0})),!1)))})),Object(r.d)(ei,{email:E?m:t,localize:o,onClose:function(){return y(!1)},onSubmit:l,sent:E,open:x}))})),di=n(199);var bi=window.matchMedia("(max-height: 330px)"),fi=function(e,t,n){return function(i){return Object(r.c)("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;z-index:",e?103:2,";pointer-events:",e?"none":"all",";box-shadow:",t?i.boxShadow.md:"none",";",n&&Object(r.c)("box-shadow:",i.boxShadow.enormous,";"),";transition:box-shadow 200ms ",i.transitions.easings.smooth,";")}},mi=Object(d.A)("div",{displayName:"IconPlaceholder",target:"e7bf83j5"})({name:"febvbf",styles:"width:25px;flex-shrink:0"}),pi=function(e){return Object(r.c)("font-size:inherit;font-weight:700;margin-top:0;margin-bottom:0;transition:opacity 100ms ",e.transitions.easings.smooth,";")},gi=Object(d.A)(Me,{target:"e7bf83j4"})({name:"1693thf",styles:"margin-right:5px"}),hi=Object(d.A)("h1",{target:"e7bf83j3"})((function(e){var t=e.theme;return pi(t)}),";"),vi={name:"1l53zi",styles:"pointer-events:none;opacity:0;cursor:auto"},Oi={name:"4uq5vb",styles:"pointer-events:all;opacity:1;cursor:pointer"},ji=Object(d.A)("button",{target:"e7bf83j2"})((function(e){var t=e.theme;return pi(t)})," margin:0 auto;padding:6px;border-radius:",(function(e){return e.theme.borderRadius.def}),";display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative;color:inherit;background:none;border:none;appearance:none;max-width:100%;transition:none;",(function(e){var t=e.show,n=e.focused;return t||n?Oi:vi}),";&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),xi=Object(d.A)(F.w,{target:"e7bf83j1"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),yi=Object(d.A)("div",{target:"e7bf83j0"})(""),wi=function(e){return Object(u.hb)(e-1).map((function(e){return Object(r.d)(mi,{key:"placeholder_"+e})}))},ki={name:"21xn5r",styles:"transform:rotate(180deg)"},Ai=Object(o.c)((function(e,t){var n=t.chatId,r=function(){return e.requestUpdateChat(n,{active:!1})},i=function(){e.setCurrentView("Homescreen")},o=e.getApplicationState("embedded");return function(e){var t=Object(c.d)(n,e),a=Object(c.rb)(e),l=function(e,t){if(e&&e.name&&t)return e.name}(t,a),s=!(Object(c.vb)(e)||Object(c.ub)(e))&&l,u=n===vt.k;return{embedded:o,closeChat:r,title:u?"Welcome to OpenAI Chat":e.localize("welcome_title"),titleWithAgentData:l,agent:t,shouldShowTitleWithAgentData:s,showCloseButton:!u&&e.getChat(n).active,localize:e.localize,showAgentBar:a,showAvatar:Object(c.i)("agentAvatar",e).enabled,isDropAreaVisible:e.getApplicationState("dropAreaVisible"),showBackButton:"Homescreen"===e.getDefaultView(),goToHomescreen:i,showRatingPrompt:Object(c.wb)(e)}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,o=e.localize,c=e.showMinimizedButton,u=e.title,b=e.titleWithAgentData,f=e.onMinimize,m=e.showAgentBar,p=e.shouldShowTitleWithAgentData,g=e.agent,h=e.showAvatar,v=e.isDropAreaVisible,O=e.showBackButton,j=e.goToHomescreen,x=e.isAgentBarExpandedSource,y=e.showRatingPrompt,w=Object(s.g)(),k=i.useRef(),A=i.useRef(),C=i.useRef(),E=i.useRef(bi.matches),S=i.useState(!1),T=S[0],_=S[1],z=Object(N.e)(),R=z.isFocusVisible,I=z.focusProps,P=w.name,B=Object(a.v)(x),D=y&&!B,H=i.useCallback((function(){x.next(!B)}),[p,x,B]);i.useEffect((function(){var e=function(e){var t=e.matches;return E.current=t};return bi.addListener(e),function(){return bi.removeListener(e)}}),[]);var M=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:wi(n.length-r.length).concat(r)}:{leftIcons:n.concat(wi(r.length-n.length)),rightIcons:r}}([O&&Object(r.d)(xi,{"aria-label":o("go_back_to_homescreen")||o("back"),key:"back",onPress:j},Object(r.d)(di.a,{"aria-hidden":!0,css:ki})),Object(r.d)(ui,{key:"menu"})],[c&&Object(r.d)(be,{key:"minimize",description:o("embedded_minimize_window")},Object(r.d)(xi,{onPress:f,"aria-label":o("embedded_minimize_window")},Object(r.d)(F.C,{"aria-hidden":!0}))),(t||T)&&Object(r.d)(Gr,{key:"close",closeChat:n,localize:o,onModalStateChange:function(e){var t=e.isOpen;return _(t)}})]),q=M.leftIcons,U=M.rightIcons,L="modern"===P?"small":"normal",V=p&&!B;return Object(r.d)(d.x,{css:fi(v,V,D),leftIcons:q,noShrink:!0,rightIcons:U,title:Object(r.d)(yi,{ref:C},!p&&!m&&u&&Object(r.d)(hi,null,u),p&&Object(r.d)(ji,Object(l.a)({show:!B},I,{focused:R,ref:A,onClick:H,"aria-expanded":B,"aria-controls":nt}),!(B&&m)&&Object(r.d)(i.Fragment,null,!B&&g&&m&&h&&Object(r.d)(gi,{avatarUrl:g.avatar,size:L,availability:"online"}),!B&&g&&!h&&Object(r.d)(gi,{size:L,availability:"online"}),Object(r.d)(hi,{ref:k,ellipsis:!0},Object(r.d)(Be.a,null,b))),B&&Object(r.d)("span",null,"Collapse")))})})),Ci=n(687),Ei=n(684),Si=i.lazy((function(){return n.e(5).then(n.bind(null,694))}));t.default=Object(o.c)((function(e){var t;return{destroyed:e.getApplicationState().destroyed,showLoader:Object(c.sb)(e),defaultWidget:e.getApplicationState().defaultWidget,currentView:e.getCurrentView(),chatId:Object(c.e)(e),homeScreenEnabled:null==(t=Object(c.i)("homeScreen",e))?void 0:t.enabled}}))((function(e){var t=e.destroyed,n=e.showLoader,i=e.currentView,o=e.defaultWidget,c=e.onMinimizeButtonPress,l=e.showMinimizedButton,s=e.homeScreenEnabled,u=e.chatId,d=Object(a.w)(!0),b=Object(a.w)(!0),f="openwidget"===o;return t?Object(r.d)(zr,null):n?Object(r.d)(Ur,null):(f||s)&&i&&"Chat"!==i?Object(r.d)(Si,{currentView:i,defaultWidget:o}):Object(r.d)(Ei.a,null,Object(r.d)(Ai,{isOnBottomSource:d,onMinimize:c,showMinimizedButton:l,isAgentBarExpandedSource:b,chatId:u}),Object(r.d)(wr,{id:u,isOnBottomSource:d,isAgentBarExpandedSource:b}),Object(r.d)(Ci.a,null))}))}}]);